# Agent System Makefile
# Chá»©c nÄƒng: Quáº£n lÃ½ cÃ¡c lá»‡nh cho há»‡ thá»‘ng agents

.PHONY: install test api api-bg clean help

# Default target
help:
	@echo "ðŸ¤– Agent System Commands"
	@echo "========================"
	@echo "install    - CÃ i Ä‘áº·t dependencies"
	@echo "test       - Cháº¡y tests"
	@echo "api        - Cháº¡y API server"
	@echo "api-bg     - Cháº¡y API server trong background"
	@echo "clean      - Dá»n dáº¹p files táº¡m"
	@echo "help       - Hiá»ƒn thá»‹ help nÃ y"

# Install dependencies
install:
	@echo "ðŸ“¦ Installing dependencies..."
	pip install flask flask-cors

# Run tests
test:
	@echo "ðŸ§ª Testing Agent system..."
	python ecommerce_agents.py
	python prompt_manager.py
	python agent_orchestrator.py

# Run API server
api:
	@echo "ðŸš€ Starting Agent API server..."
	python agent_api.py --host 0.0.0.0 --port 5003

# Run API server in background
api-bg:
	@echo "ðŸš€ Starting Agent API server in background..."
	nohup python agent_api.py --host 0.0.0.0 --port 5003 > logs/agent_api.log 2>&1 &
	@echo "âœ… Agent API server started in background"
	@echo "ðŸ“‹ Check logs: tail -f logs/agent_api.log"
	@echo "ðŸ”— API URL: http://localhost:5003"

# Clean temporary files
clean:
	@echo "ðŸ§¹ Cleaning temporary files..."
	find . -name "*.pyc" -delete
	find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true
	rm -f logs/agent_api.log
	@echo "âœ… Cleaned up"

# Stop background processes
stop:
	@echo "ðŸ›‘ Stopping background processes..."
	pkill -f "agent_api.py" || true
	@echo "âœ… Stopped background processes"

